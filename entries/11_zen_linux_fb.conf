# path:   /home/klassiker/.local/share/repos/efistub/entries/11_zen_linux_fb.conf
# author: klassiker [mrdotx]
# github: https://github.com/mrdotx/efistub
# date:   2021-06-12T07:39:03+0200

# helper
kernel="$( \
    find /boot -iname "vmlinuz*zen" -exec basename {} \; \
        | sort -V \
        | tail -1 \
)"

kernel_version="$( \
    printf "%s" "$kernel" \
        | cut -d '-' -f2 \
)"

ramfs="$( \
    find /boot -iname "initramfs*zen-fallback.img" -exec basename {} \; \
        | sort -V \
        | tail -1 \
)"

# efibootmgr options
label="Zen Linux $kernel_version Fallback"
disk="/dev/nvme0n1"
loader="/$kernel"

options="
    initrd=/intel-ucode.img
    initrd=/$ramfs
    root=UUID=5b21fe4a-3cae-4150-91bc-bf1d5ddbe03a rw
"

# unset helper
unset kernel kernel_version ramfs
